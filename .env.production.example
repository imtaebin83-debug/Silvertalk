# ============================================================
# SilverTalk 환경 변수 설정 (Upstash Redis + RunPod)
# ============================================================
# 사용법: 이 파일을 .env로 복사하고 실제 값으로 수정하세요.
# cp .env.example .env

# ============================================================
# 환경 구분
# ============================================================
ENVIRONMENT=production  # development, production

# ============================================================
# 배포 환경 선택
# ============================================================
# LOCAL: docker-compose (로컬 Redis)
# CLOUD: EC2 + RunPod (Upstash Redis)
DEPLOYMENT_MODE=CLOUD  # LOCAL or CLOUD

# ============================================================
# AI 모델 저장 경로 (환경별 자동 설정)
# ============================================================
# RunPod (Docker): /app/models
# EC2 (베어메탈): /home/ubuntu/Silvertalk/backend/models
# 로컬: backend/models
MODELS_ROOT=/home/ubuntu/Silvertalk/backend/models  # EC2용

# ============================================================
# Redis 설정 (배포 환경에 따라 자동 선택)
# ============================================================

# 로컬 개발용 Redis (docker-compose)
LOCAL_REDIS_URL=redis://redis:6379/0

# Upstash Redis (EC2 + RunPod 공용)
# Upstash Console에서 복사: rediss://default:[password]@[host]:[port]
UPSTASH_REDIS_URL=rediss://default:YOUR_PASSWORD@YOUR_HOST.upstash.io:6379

# 자동 선택 (코드에서 DEPLOYMENT_MODE 기반 선택)
REDIS_URL=${UPSTASH_REDIS_URL}
CELERY_BROKER_URL=${UPSTASH_REDIS_URL}
CELERY_RESULT_BACKEND=${UPSTASH_REDIS_URL}

# ============================================================
# Gemini API 키 (필수!)
# ============================================================
# https://makersuite.google.com/app/apikey 에서 발급
GEMINI_API_KEY=your_gemini_api_key_here

# ============================================================
# AWS 설정 (S3 파일 저장용)
# ============================================================
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=ap-northeast-2
S3_BUCKET_NAME=silvertalk-media

# ============================================================
# 데이터베이스 설정
# ============================================================

# 로컬 개발: Docker PostgreSQL
LOCAL_DATABASE_URL=postgresql://silvertalk:silvertalk_dev_password@postgres:5432/silvertalk

# 프로덕션: AWS RDS PostgreSQL (EC2 + RunPod 공용)
# RDS 엔드포인트 주소로 변경
PROD_DATABASE_URL=postgresql://silvertalk:YOUR_RDS_PASSWORD@YOUR_RDS_ENDPOINT.ap-northeast-2.rds.amazonaws.com:5432/silvertalk

# 자동 선택
DATABASE_URL=${PROD_DATABASE_URL}

# ============================================================
# RunPod 전용 설정
# ============================================================

# RunPod Pod ID (런팟 대시보드에서 확인)
RUNPOD_POD_ID=your_pod_id

# RunPod API Key (RunPod에서 발급, 모니터링용)
RUNPOD_API_KEY=your_runpod_api_key

# GPU 설정
CUDA_VISIBLE_DEVICES=0  # GPU 사용 (RunPod)
# CUDA_VISIBLE_DEVICES=""  # CPU 모드 (로컬)

# ============================================================
# 로그 레벨
# ============================================================
LOG_LEVEL=INFO

# ============================================================
# 파일 저장 전략
# ============================================================
# LOCAL: /app/data 로컬 저장
# S3: AWS S3 저장
STORAGE_BACKEND=S3  # LOCAL or S3